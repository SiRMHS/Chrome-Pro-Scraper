# Chrome Selector Scraper Extension

پیشنهادات خودتونو میتونید تو دیسکورد یا تلگرام بهم بگید :)
- https://t.me/SiRMHS
- Discord : .mhs.

یک افزونه‌ی کروم برای انتخاب (Select) المنت‌های صفحه وب و استخراج داده‌ها، با قابلیت:
- **گروه‌بندی سلکتورها**
- انتخاب معمولی یا سریع (Quick Mode)
- تعریف **Regex** برای پردازش و تمیزکردن خروجی
- انتخاب ویژگی‌های مختلف (text / html / attr:...)
- پشتیبانی از `all` برای گرفتن همه‌ی نتایج
- ذخیره پروفایل‌ها و گروه‌ها در حافظه افزونه
- اجرای اسکرپینگ روی پروفایل ذخیره‌شده

---

## ویژگی‌ها

- **انتخاب بصری:** با کلیک روی دکمه `Start Picking` می‌توانید المان‌ها را روی صفحه انتخاب کنید.
- **مد سریع (Quick Mode):** بدون نیاز به وارد کردن دستی key و attr برای هر انتخاب.
- **Regex داخلی:** می‌توانید با تعریف Pattern، Flags، Mode (capture یا replace) و Group، خروجی را تمیز کنید.
- **پروفایل‌ها و گروه‌ها:** می‌توانید برای هر وبسایت چندین پروفایل و گروه سلکتور بسازید.
- **حالت استخراج همه (`all`):** اگر فعال باشد، تمام matchها برای selector انتخابی جمع‌آوری می‌شود.

---

## نصب افزونه (Developer Mode)

1. سورس پروژه را دانلود و از حالت فشرده خارج کنید.
2. کروم را باز کنید و وارد `chrome://extensions` شوید.
3. **Developer mode** را فعال کنید.
4. روی **Load unpacked** کلیک کنید و پوشه سورس افزونه را انتخاب کنید.
5. افزونه فعال می‌شود و آیکن آن در نوار ابزار دیده می‌شود.

---

## استفاده

### 1. ایجاد پروفایل
- روی آیکن افزونه کلیک کنید یا صفحه `app.html` را باز کنید.
- یک پروفایل جدید بسازید (نام و دامنه).

### 2. ایجاد گروه
- در پروفایل یک یا چند گروه اضافه کنید.
- هر گروه مجموعه‌ای از سلکتورهای مرتبط را نگه می‌دارد.

### 3. اضافه کردن سلکتور
- روی دکمه **Start Picking** بزنید تا وارد حالت انتخاب شوید.
- روی المان مورد نظر در صفحه کلیک کنید.
- مشخصات سلکتور را وارد کنید:
  - **Key:** کلید داده در خروجی
  - **Selector:** مسیر CSS
  - **Attr:** نوع داده (`text`, `html`, یا `attr:...`)
  - **All:** گرفتن همه‌ی matchها
  - **Regex Pattern:** الگوی پردازش (اختیاری)
  - **Regex Flags:** مثل `gmi`
  - **Regex Mode:** 
    - `capture` → استخراج گروه مشخص
    - `replace` → جایگزینی متن با Replacement
  - **Regex Group:** شماره گروه (برای capture)
  - **Replacement:** رشته جایگزین (برای replace)

### 4. اجرای اسکرپینگ
- در صفحه اصلی، گروه یا کل پروفایل را انتخاب کنید.
- روی دکمه `Run Scraper` کلیک کنید.
- خروجی داده‌ها در قالب JSON نمایش داده می‌شود.

---

## نمونه استفاده از Regex

### مثال: استخراج URL از `background-image`
- فرض کنید style این باشد:

- background-image: url("https://example.com/image.jpg");
- Attr: attr:style
- Regex Pattern: url\(\s*(?:"([^"]+)"|'([^']+)'|([^)\s]+))\s*\)
- Flags: i
- Mode: capture
- Group: 1
- خروجی:
- https://example.com/image.jpg


نکات

این افزونه فقط روی صفحاتی که اجازه اجرای contentScript را دارند کار می‌کند.

برای دامنه‌های خاص باید در manifest.json مجوز host اضافه شود.

برای اجرای Regex، ابتدا متن normalize می‌شود تا escapeهای \" و \' حذف شوند.

```css
background-image: url("https://example.com/image.jpg");
